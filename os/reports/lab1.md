# 实现的功能描述
在 task.rs 中的 TaskControlBlock 结构体增加了 sys_call_times 数组，记录系统调用次数.
TASK_MANAGER 中的当前任务执行系统调用时自增对应次数.
TaskManager 实现了 get_sys_call_times 方法获取当前任务的系统调用次数数组.
process.rs 中的 sys_task_info 函数获取当前任务的系统调用次数和运行时间，状态设置为 "Running"。
# 简答作业
## 1. 正确进入 U 态后，程序的特征还应有：使用 S 态特权指令，访问 S 态寄存器后会报错。请同学们可以自行测试这些内容 (运行 Rust 两个 bad 测例 (ch2b_bad_*.rs) ) ，描述程序出错行为，同时注意注明你使
用的 sbi 及其版本。
Rustsbi 版本为: 0.2.0-alpha.2
出现报错:
```
[kernel] PageFault in application, bad addr = 0x0, bad instruction = 0x804003c4, kernel killed it.
[kernel] IllegalInstruction in application, kernel killed it.
[kernel] IllegalInstruction in application, kernel killed it.
```
ch2b_bad_address.rs 程序尝试访问了地址0x0处的无效内存，并执行了0x804003c4处的非法指令，导致内核终止了程序的执行
ch2b_bad_instructions.rs sret指令要求特权级别高于用户态的特权级别,会触发非法指令异常，内核会检测到这样的非法操作，并终止相关程序的执行
ch2b_bad_register.rs srr指令是非法指令,内核会检测到这样的非法操作，并终止相关程序的执行
## 2. 请通过 gdb 跟踪或阅读源代码了解机器从加电到跳转到 0x80200000 的过程，并描述重要的跳转。回答
内核是如何进入 S 态的？
• 事实上进入 rustsbi (0x80000000) 之后就不需要使用 gdb 调试了。可以直接阅读 代码 。
• 可以使用 Makefile 中的 make debug 指令。
• 一些可能用到的 gdb 指令：
– x/10i 0x80000000 : 显示 0x80000000 处的 10 条汇编指令。
– x/10i $pc : 显示即将执行的 10 条汇编指令。
– x/10xw 0x80000000 : 显示 0x80000000 处的 10 条数据，格式为 16 进制 32bit。
– info register: 显示当前所有寄存器信息。
– info r t0: 显示 t0 寄存器的值。
– break funcname: 在目标函数第一条指令处设置断点。
– break *0x80200000: 在 0x80200000 出设置断点。
– continue: 执行直到碰到断点。
– si: 单步执行一条汇编指令。

以下是其中几个重要的跳转点：
**引导程序跳转到内核入口点：**这是系统启动过程中的关键跳转点。在引导程序执行完初始化、加载内核等操作后，它会通过跳转指令将控制权转移到内核的入口点处。这个跳转点标志着系统从引导阶段切换到内核启动阶段。
**内核初始化跳转到主函数：**在内核启动阶段，内核会执行一系列的初始化操作，包括初始化硬件、设置中断向量表、建立内存映射等。完成这些初始化后，内核会跳转到主函数或内核的主调度循环。这个跳转点标志着内核已经准备就绪，可以开始处理系统的正常操作。
**用户态和内核态之间的跳转：**在操作系统运行期间，用户态和内核态之间会频繁切换。当用户程序需要执行特权指令或访问受保护资源时，会触发从用户态到内核态的跳转。这些跳转通过系统调用或异常处理实现，确保了系统的安全性和稳定性。

内核进入S态的过程：
发生异常或中断： 当用户态程序执行特权指令、发生硬件故障、或者收到外部中断等情况时，处理器会触发异常或中断。
异常处理流程： 当异常发生时，处理器会跳转到预定义的异常处理程序（例如异常向量表中的指定入口），该程序通常由操作系统内核提供。
特权级别切换： 异常处理程序运行在特权级别高于用户态的特权级别，因此内核在这时已经处于S态。在某些架构中，如ARM，S态也被称为处理器的特权模式（privileged mode）或监管模式（supervisor mode）。
内核处理异常： 在S态下，内核可以执行一系列的操作，包括处理异常、保存现场、进行资源管理等。
异常返回： 在完成必要的操作后，内核可以选择将控制权返回到用户态程序，或者继续在S态下执行。这通常通过异常返回指令（如ARM架构中的eret指令）来实现。